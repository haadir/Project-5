<!DOCTYPE html>
<html>

<head>
	<title>Haadi R | Assignment 5</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
	<link rel="stylesheet" href="style.css">
	<style>
		#pixel-box {
			height: 200px;
		}

		#box {
			width: 150px;
			height: 150px;
			line-height: 150px;
			text-align: center;
			font-size: 1.2em;
			margin: auto;
			background-color: #CCC;
			border: 1px solid #000;
			border-radius: 5px;

			position: relative;
			left: 0px;
		}
	</style>
</head>

<body class="py-5">
	<div class="container">
		<div class="row">
			<h1 class="col-12">Assignment 5: Registration Form Validation</h1>
		</div> <!-- .row -->
	</div> <!-- .container -->

	<div class="container">
		<div class="row">
			<h2 class="col-12 mt-5 mb-4">Signup Form</h2>

			<div class="col-12">
				Validation rules:
				<ul>
					<li class="mt-2">Email cannot be empty.</li>
					<li>Email must contain "@" character.</li>
					<li>Phone cannot be empty.</li>
					<li>Phone must use one of the acceptable formats.</li>
					<li>Website must be valid.</li>
					<li class="mb-4">Password must be valid.</li>
				</ul>
			</div> <!-- .col -->

			<div class="col-12">

				<form id="signup-form">

					<div class="row mb-2">
						<div class="col-sm-8 offset-sm-2">
							<small class="form-text text-muted">First and last name must start with an uppercase letter
								followed by lowercase letters only.</small>
						</div>
					</div> <!-- .row -->

					<div class="form-group row">
						<label for="firstName" class="col-sm-2 col-form-label">First Name:</label>
						<div class="col-sm-10">
							<input type="text" name="firstName" class="form-control" placeholder="Elon" id="firstName">

							<small id="firstName-error" class="form-text text-danger"></small>

						</div>
					</div> <!-- .form-group -->

					<div class="form-group row">
						<label for="lastName" class="col-sm-2 col-form-label">Last Name:</label>
						<div class="col-sm-10">
							<input type="text" name="lastName" class="form-control" placeholder="Musk" id="lastName">

							<small id="lastName-error" class="form-text text-danger"></small>

						</div>
					</div> <!-- .form-group -->

					<div class="row mb-2">
						<div class="col-sm-8 offset-sm-2">
							<small class="form-text text-muted">Must be a valid URL that starts with http:// or
								https://.</small>
						</div>
					</div> <!-- .row -->

					<div class="form-group row">
						<label for="website" class="col-sm-2 col-form-label">Website:</label>
						<div class="col-sm-10">
							<input type="text" name="website" class="form-control" placeholder="http://google.com/"
								id="website">

							<small id="website-error" class="website-text text-danger"></small>

						</div>
					</div> <!-- .form-group -->

					<div class="row mb-2">
						<div class="col-sm-8 offset-sm-2">
							<small class="form-text text-muted">Must end with @usc.edu</small>
						</div>
					</div> <!-- .row -->

					<div class="form-group row">
						<label for="email" class="col-sm-2 col-form-label">Email:</label>
						<div class="col-sm-10">
							<input type="text" name="email" class="form-control" placeholder="ttrojan@usc.edu"
								id="email">

							<small id="email-error" class="form-text text-danger"></small>

						</div>
					</div> <!-- .form-group -->

					<div class="row mb-2">
						<div class="col-sm-8 offset-sm-2">
							<small class="form-text text-muted">Acceptable formats: 123 456 7890 and
								123-456-7890</small>
						</div>
					</div> <!-- .row -->

					<div class="form-group row">
						<label for="phone" class="col-sm-2 col-form-label">Phone:</label>
						<div class="col-sm-8">
							<input type="text" name="phone" class="form-control" placeholder="123-456-7890" id="phone">

							<small id="phone-error" class="form-text text-danger"></small>

						</div>
					</div> <!-- .form-group -->

					<div class="row mb-2">
						<div class="col-sm-8 offset-sm-2">
							<small class="form-text text-muted">Must contain at least one uppercase, lowercase, digit,
								and special character (!, @, #, $, %, ^, &, or *)</small>
						</div>
					</div> <!-- .row -->

					<div class="form-group row">
						<label for="password" class="col-sm-2 col-form-label">Password:</label>
						<div class="col-sm-8">
							<input type="text" name="password" class="form-control" placeholder="Ex. Password123!"
								id="password">

							<small id="password-error" class="form-text text-danger"></small>

						</div>
					</div> <!-- .form-group -->

					<div class="form-group row">
						<div class="col-sm-10">
							<button type="submit" class="btn btn-primary">Submit</button>
						</div> <!-- .col -->
					</div> <!-- .form-group -->

					<div class="col-12">
						<h2 class="col-12 mt-5 mb-4">Information</h2>
						<p>Name: </p>
						<p id="nameInput" class="form-text"></p>
						<p>Username: </p>
						<p id="emailInput" class="form-text"></p>
						<p>Phone Number: </p>
						<p id="phoneInput" class="form-text"></p>
					</div>

				</form>
			</div> <!-- .col -->
		</div> <!-- .row -->
	</div> <!-- .container -->

	<script src="websiteValidation.js"></script>

	<script>

		document.querySelector("#signup-form").onsubmit = function () {
			console.log("Form Submitted")
			let validForm = true


			// FIRST NAME CHECKER

			const firstName = document.querySelector("#firstName").value.trim()

			if (firstName.length === 0) {
				validForm = false
				document.querySelector("#firstName-error").innerHTML = "First name cannot be empty."
			}
			else if (/^\p{Lu}\p{Ll}*$/gmu.test(firstName) === false) {
				validForm = false
				document.querySelector("#firstName-error").innerHTML = "Invalid First Name."
			} else {
				document.querySelector("#firstName-error").innerHTML = ""
			}

			// LAST NAME CHECKER

			const lastName = document.querySelector("#lastName").value.trim()

			if (lastName.length === 0) {
				validForm = false
				document.querySelector("#lastName-error").innerHTML = "Last name cannot be empty."
			} else if (/^\p{Lu}\p{Ll}*$/gmu.test(lastName) === false) {
				validForm = false
				document.querySelector("#lastName-error").innerHTML = "Invalid Last Name."
			} else {
				document.querySelector("#lastName-error").innerHTML = ""
			}


			// WEBSITE CHECKER

			const website = document.querySelector("#website").value.trim()

			if (website.length === 0) {
				validForm = false
				document.querySelector("#website-error").innerHTML = "Website cannot be empty."
			} else if (website.includes("http://") === false && website.includes("https://") === false) {
				validForm = false
				document.querySelector("#website-error").innerHTML = "Must start with http:// or https://."
			}
			// else if (isValidURL(website) === false) {
			// 	console.log("Website not valid")
			// 	validForm = false
			// 	document.querySelector("#website-error").innerHTML = "Invalid URL."
			// }
			else {
				document.querySelector("#website-error").innerHTML = ""
			}


			// EMAIL CHECKER

			const email = document.querySelector("#email").value.trim()
			console.log(email)

			if (email.length === 0) {
				validForm = false
				document.querySelector("#email-error").innerHTML = "Email cannot be empty."
			} else if (email.includes("@usc.edu") === false) {
				validForm = false
				document.querySelector("#email-error").innerHTML = "Must be usc.edu email."
			}
			else {
				document.querySelector("#email-error").innerHTML = ""
			}


			// PHONE CHECKER

			const phone = document.querySelector("#phone").value.trim()

			if (/^$/.test(phone)) {
				validForm = false
				document.querySelector("#phone-error").innerHTML = "Phone cannot be empty."
			} else if (/(^\d{3}-\d{3}-\d{4}$|^\d{3}\s\d{3}\s\d{4}$)/.test(phone) === false) {
				validForm = false
				document.querySelector("#phone-error").innerHTML = "Invalid phone format."
			} else {
				document.querySelector("#phone-error").innerHTML = ""
			}


			// PASSWORD CHECKER

			const password = document.querySelector("#password").value.trim()

			if (password.length === 0) {
				validForm = false
				document.querySelector("#password-error").innerHTML = "Password cannot be empty."
			} else if (/(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*\W)/.test(password) === false) {
				validForm = false
				document.querySelector("#password-error").innerHTML = "Insecure password."
			} else {
				document.querySelector("#password-error").innerHTML = ""
			}

			if (validForm) {
				document.querySelector("#nameInput").innerHTML = firstName + " " + lastName
				var username = email.replace('@usc.edu', '')
				document.querySelector("#emailInput").innerHTML = username
				var phone1 = phone.replaceAll(' ', '-')
				document.querySelector("#phoneInput").innerHTML = phone1
			}

			return false
		}

	</script>

</body>

</html>